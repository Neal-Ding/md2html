<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <script>
//        var orgData = '<h1>标题1 @{c0401} -{alipay.mobile.public.message.custom.send} -{alipay.mobile.public.message.push}</h1>';
//        var orgData = '<h2 id="-c0402-">标题2 @{c0402} -{alipay.mobile.public.message.custom.send} -{alipay.mobile.public.message.push}</h2>';
        var orgData = '<h3 id=" abad">标题2 @{c0402} -{alipay.mobile.public.message.custom.send} -{alipay.mobile.public.message.push}</h3>';

        var r4 = /<(h[1-6]).*?>.*?<\/\1>/gi;
        var r5 = /-\{[^\}]+\}/gi;
        var r6 = /\@\{[^\}]+\}/gi;
        var replaceHeadingTagReg = /<(h\d)[^<]*>/gi;
        var replaceHeaderConReg = / *[-\@]\{[^\}]+\}/gi;

        var resData = orgData.replace(r4, function(w){
            if(w.match(r6)){
                var anchor = w.match(r6)[0];
            }
            var emptyAnchors = w.match(r5);

            var emptyDivStr = '';
            if(emptyAnchors){
                for(var idx = 0; idx < emptyAnchors.length; idx++){
                    var emptyACon = emptyAnchors[idx].match(/[^-\{\}]+/gi);
                    emptyDivStr += '<div id="'+ emptyACon +'"></div>';
                }
            }

            if(anchor){
                w = w.replace(replaceHeadingTagReg, function(word, tag){
                    return '<'+ tag +' id="'+ anchor.match(/[^\@\{\}]+/gi) +'">';
                });
            }

            w = w.replace(replaceHeaderConReg,function(word){
                return '';
            });

            return emptyDivStr + w;
        });

        console.log(resData);
    </script>
</body>
</html>
